# 4.2 个性化学习行为模式 - 使用说明

## 快速开始

### 1. 启动项目

```bash
# 启动后端（端口5000）
cd visualization-project-backend
python app.py

# 启动前端（端口8080）
cd visualization-project-frontend
npm install
npm run serve
```

### 2. 访问界面

打开浏览器访问：`http://localhost:8080`

---

## 功能使用指南

### 蓝色框1 - 个性化学习行为模式

#### 基本操作流程

1. **选择筛选条件**
   - 在顶部选择 `class`（班级）或 `student`（学生）
   - 在蓝色框1顶部选择 `月份`（可选，默认显示所有月份聚合数据）

2. **执行筛选**
   - 点击 `筛选` 按钮：使用当前的 class/student/month 组合查询数据
   - 点击 `重置` 按钮：清空月份选择，显示所有月份聚合数据

3. **切换Tab查看不同维度**
   - **基础特征**：雷达图，展示4个核心特征与平均值的对比
   - **学习模式**：柱状图，展示三种学习模式的人数分布
   - **编程方法**：环形饼图，展示最常用的5种编程方法
   - **知识点**：水平柱状图，展示知识点掌握情况（颜色编码）

#### Tab切换说明

- 点击Tab标签可切换不同的可视化图表
- 切换时有0.5s的平滑滑动动画
- 每个Tab的数据在首次加载时一次性获取

---

### 蓝色框2 - 时间维度分析

#### 功能说明

1. **24小时答题高峰时段**
   - 径向气泡图，类似24小时时钟
   - 0点在顶部，顺时针排列
   - 气泡大小表示该时段的提交次数
   - 绿色气泡，透明度0.7

2. **月度学习活动热力图**
   - 网格热力图，月份×日期布局
   - 颜色深浅表示活动强度
   - 颜色映射：浅黄→深红（活动量从低到高）

#### 数据联动

- 蓝色框2的月份筛选与蓝色框1同步
- 当蓝色框1选择月份并点击筛选后，蓝色框2自动更新数据

---

## 状态说明

### 加载状态
- 数据加载时显示旋转的加载动画
- 提示文字："数据加载中..."

### 错误状态
- 数据加载失败时显示错误信息
- 提供"重试"按钮，点击可重新加载数据

### 空数据状态
- 未选择班级或学生时，显示提示："请先选择班级或学生"
- 数据为空时，图表区域显示空状态提示

---

## 数据筛选逻辑

### 筛选条件组合

| 条件组合 | 说明 | 示例 |
|---------|------|------|
| class + month | 获取指定班级在指定月份的数据 | class=J23517, month=2024-01 |
| student + month | 获取指定学生在指定月份的数据 | student=xxx, month=2024-02 |
| class（无month） | 获取指定班级所有月份的聚合数据 | class=J23517 |
| student（无month） | 获取指定学生所有月份的聚合数据 | student=xxx |

### 优先级规则

- 如果同时选择 `student` 和 `class`，优先使用 `student`（个体分析）
- 月份筛选是可选的，不选择则显示所有月份的聚合数据

---

## 图表说明

### 蓝色框1 - Tab 1: 基础特征（雷达图）

**4个维度：**
- 提交次数（submit_count）
- 活跃天数（active_days）
- 答题数（question_count）
- 正确占比（correct_ratio）

**数据对比：**
- 橙色虚线：当前学习者/班级的数据
- 蓝色实线：平均值（对比基准）

### 蓝色框1 - Tab 2: 学习模式（柱状图）

**三种学习模式：**
- 探索尝试型：submit_ratio >= 0.85 AND correct_ratio >= 0.85
- 广泛多样型：question_ratio >= 0.85 AND correct_ratio < 0.85 AND active_ratio >= 0.8
- 集中针对型：其他情况

### 蓝色框1 - Tab 3: 编程方法（环形饼图）

**显示内容：**
- 最常用的5种编程方法
- 每种方法的使用频率和占比
- 左侧图例，右侧图表

### 蓝色框1 - Tab 4: 知识点（水平柱状图）

**颜色编码：**
- 🟢 绿色（≥60%）：掌握良好
- 🟠 橙色（40-60%）：掌握一般
- 🔴 红色（<40%）：掌握较差

### 蓝色框2 - 24小时答题高峰时段

**布局：**
- 径向布局，类似时钟
- 0点在顶部，顺时针排列到23点
- 气泡大小表示活动量

### 蓝色框2 - 月度活动热力图

**布局：**
- 月份（X轴）× 日期（Y轴）网格
- 每个单元格代表一个月中的某一天
- 颜色深浅表示活动强度

---

## 常见问题

### Q1: 为什么图表不显示？

**可能原因：**
1. 未选择班级或学生
2. 数据加载失败（检查后端API是否正常运行）
3. 该班级/学生没有数据

**解决方法：**
- 确保已选择班级或学生
- 检查浏览器控制台的错误信息
- 确认后端API接口正常返回数据

### Q2: 月份下拉框是空的？

**可能原因：**
1. 未选择班级或学生
2. 该班级/学生没有提交记录数据

**解决方法：**
- 先选择班级或学生
- 检查后端 `/api/learning-profile/available-months` 接口是否正常

### Q3: Tab切换没有动画效果？

**可能原因：**
- 浏览器不支持CSS transition
- 图表容器高度不够

**解决方法：**
- 使用现代浏览器（Chrome、Firefox、Edge等）
- 确保图表容器有足够的高度

---

## 技术栈

- **前端框架**: Vue 3
- **图表库**: ECharts 6
- **HTTP客户端**: Axios
- **样式**: CSS3（Flexbox、Transition）

---

## API接口

所有API接口定义请参考：`visualization-project-backend/API_4.2_个性化学习行为模式.md`

主要接口：
- `/api/learning-profile/comprehensive-bluebox1` - 蓝色框1综合数据
- `/api/learning-profile/comprehensive-bluebox2` - 蓝色框2综合数据
- `/api/learning-profile/available-months` - 获取可用月份列表

---

## 开发说明

### 组件结构

```
src/
├── App.vue                    # 主应用组件
└── components/
    ├── BlueBox1.vue          # 蓝色框1组件
    └── BlueBox2.vue          # 蓝色框2组件
```

### 数据流

1. 用户在顶部选择 class/student
2. BlueBox1 自动加载可用月份列表
3. 用户选择月份（可选）并点击筛选
4. BlueBox1 调用API获取数据并渲染图表
5. BlueBox1 通过事件通知 BlueBox2 更新月份筛选
6. BlueBox2 调用API获取数据并渲染图表

---

## 更新日志

### v1.0.0 (2024-01-XX)
- ✅ 完成蓝色框1基础功能（Tab切换、图表展示）
- ✅ 完成蓝色框2基础功能（24小时分布、月度热力图）
- ✅ 添加加载状态、错误处理、空数据提示
- ✅ 实现月份筛选联动功能

