# 4.2 个性化学习行为模式 - 蓝色框设计说明

## 设计概览

根据需求文档和参考图片，蓝色框部分包含两个主要区域：
- **蓝色框1**：学习行为模式综合展示（带Tab切换）
- **蓝色框2**：时间维度分析（24小时分布 + 月度热力图）

---

## 蓝色框1设计

### 布局结构

```
┌─────────────────────────────────────────┐
│  月份: [下拉框] [筛选] [重置]            │  ← 筛选区域
├─────────────────────────────────────────┤
│  [基础特征] [学习模式] [编程方法] [知识点] │  ← Tab切换（橙色下划线表示激活）
├─────────────────────────────────────────┤
│                                         │
│           图表内容区域                   │  ← 左右平滑切换
│      (根据选中的Tab显示对应图表)          │
│                                         │
└─────────────────────────────────────────┘
```

### 功能特性

1. **筛选区域**
   - 月份下拉选择器：显示可用月份列表（格式：2024年1月）
   - 筛选按钮：点击后使用当前的 class/student/month 组合作为筛选条件
   - 重置按钮：清空月份选择，显示所有月份的聚合数据

2. **Tab切换**
   - 4个Tab：基础特征、学习模式、编程方法、知识点
   - 激活状态：橙色文字 + 橙色下划线
   - 点击Tab时，图表内容左右平滑切换（0.5s过渡动画）

3. **图表内容**

   **Tab 1: 基础特征**
   - 图表类型：雷达图（Radar Chart）
   - 显示内容：
     - 4个维度：提交次数、活跃天数、答题数、正确占比
     - 两条数据线：
       - 橙色虚线：当前学习者/班级的数据
       - 蓝色实线：平均值（对比基准）
   - 样式：橙色半透明填充区域，蓝色半透明填充区域

   **Tab 2: 学习模式**
   - 图表类型：柱状图（Bar Chart）
   - 显示内容：
     - X轴：三种学习模式（探索尝试型、广泛多样型、集中针对型）
     - Y轴：人数
     - 柱状图显示各模式的人数分布
   - 样式：蓝色渐变柱状图，顶部显示数值

   **Tab 3: 编程方法**
   - 图表类型：环形饼图（Donut Chart）
   - 显示内容：
     - 最常用的5种编程方法及其使用频率
     - 显示方法名称和使用占比
   - 样式：环形饼图，左侧图例，右侧图表

   **Tab 4: 知识点**
   - 图表类型：水平柱状图（Horizontal Bar Chart）
   - 显示内容：
     - Y轴：知识点ID
     - X轴：掌握度（%）
     - 颜色编码：
       - 绿色（≥60%）：掌握良好
       - 橙色（40-60%）：掌握一般
       - 红色（<40%）：掌握较差
   - 样式：水平柱状图，右侧显示百分比

---

## 蓝色框2设计

### 布局结构

```
┌─────────────────────────────────────────┐
│      学习者答题高峰时段                  │  ← 标题
│                                         │
│          [径向气泡图]                    │  ← 24小时时钟样式
│       (0-23小时，气泡大小表示活动量)      │
│                                         │
├─────────────────────────────────────────┤
│      月度学习活动热力图                  │  ← 标题
│                                         │
│    [网格热力图]                          │  ← 月份×日期网格
│    (发光圆圈表示活动强度)                 │
│                                         │
└─────────────────────────────────────────┘
```

### 功能特性

1. **上半部分：24小时答题高峰时段**
   - 图表类型：径向气泡图（Radial Bubble Chart）
   - 布局：类似24小时时钟，0点在顶部，顺时针排列
   - 显示内容：
     - 24个时段（0-23时）沿圆周分布
     - 气泡大小表示该时段的提交次数
     - 气泡颜色：绿色，透明度0.7
   - 交互：鼠标悬停显示具体时段和提交次数

2. **下半部分：月度活动热力图**
   - 图表类型：网格热力图（Grid Heatmap）
   - 布局：月份（X轴）× 日期（Y轴）网格
   - 显示内容：
     - 每个单元格代表一个月中的某一天
     - 颜色深浅表示该天的活动强度
     - 颜色映射：浅黄→深红（活动量从低到高）
   - 交互：鼠标悬停显示具体日期和提交次数

---

## 数据筛选逻辑

### 筛选条件组合

1. **class + month**: 获取指定班级在指定月份的数据
2. **student + month**: 获取指定学生在指定月份的数据
3. **class（无month）**: 获取指定班级所有月份的聚合数据
4. **student（无month）**: 获取指定学生所有月份的聚合数据

### 筛选流程

1. 用户在顶部选择 class 或 student
2. 蓝色框1自动加载可用月份列表
3. 用户选择月份（可选）
4. 点击"筛选"按钮，使用 class/student/month 组合查询数据
5. 点击"重置"按钮，清空月份选择，显示所有月份聚合数据

---

## 视觉效果

### 颜色方案
- **主色调**：蓝色（#4169e1）
- **强调色**：橙色（#ff7f00）
- **成功色**：绿色（#32cd32）
- **警告色**：橙色（#ffa500）
- **错误色**：红色（#ff6347）

### 动画效果
- Tab切换：0.5s平滑过渡（transform translateX）
- 图表加载：淡入效果
- 按钮悬停：颜色渐变过渡

### 响应式设计
- 图表自动适应容器大小
- 窗口大小变化时，图表自动resize
- 移动端适配（可选）

---

## 技术实现

### 前端技术栈
- Vue 3
- ECharts 6
- Axios

### 组件结构
```
BlueBox1.vue
  ├─ 筛选区域（月份选择器、筛选按钮、重置按钮）
  ├─ Tab切换区域
  └─ 图表内容区域（4个Tab对应的图表）

BlueBox2.vue
  ├─ 24小时答题高峰时段（径向气泡图）
  └─ 月度活动热力图（网格热力图）
```

### API调用
- 使用 `/api/learning-profile/comprehensive-bluebox1` 一次性获取所有Tab数据
- 使用 `/api/learning-profile/comprehensive-bluebox2` 获取蓝色框2数据
- 使用 `/api/learning-profile/available-months` 获取可用月份列表

---

## 设计亮点

1. **Tab平滑切换**：左右滑动效果，提升用户体验
2. **多维度展示**：通过不同图表类型展示不同维度的数据
3. **交互式筛选**：月份筛选与顶部class/student联动
4. **视觉层次清晰**：颜色编码、图表类型区分不同数据类型
5. **响应式设计**：图表自动适应容器大小

---

## 参考图片对应关系

根据提供的参考图片：

1. **"学习者能力画像"面板** → 对应蓝色框1的Tab 1（基础特征雷达图）
2. **"学习者答题高峰时段"面板** → 对应蓝色框2的上半部分（24小时径向气泡图）
3. **月度活动热力图** → 对应蓝色框2的下半部分（网格热力图）

设计完全按照参考图片的布局和样式进行实现。

